<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article Editor Test Runner</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .test-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .control-group h3 {
            margin-top: 0;
            color: #495057;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }

        button {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
            min-width: 140px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }

        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .success { background: linear-gradient(135deg, #28a745, #20c997); }
        .warning { background: linear-gradient(135deg, #ffc107, #fd7e14); }
        .danger { background: linear-gradient(135deg, #dc3545, #e83e8c); }
        .info { background: linear-gradient(135deg, #17a2b8, #6f42c1); }

        .test-output {
            margin-top: 30px;
        }

        .output-area {
            background: #212529;
            color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            height: 400px;
            overflow-y: auto;
            border: 2px solid #495057;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #e9ecef;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #6c757d;
            animation: pulse 2s infinite;
        }

        .indicator-dot.running { background: #ffc107; }
        .indicator-dot.success { background: #28a745; }
        .indicator-dot.error { background: #dc3545; }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #28a745);
            width: 0%;
            transition: width 0.3s ease;
        }

        .test-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .result-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .result-card.passed {
            border-left: 4px solid #28a745;
            background: #f8fff9;
        }

        .result-card.failed {
            border-left: 4px solid #dc3545;
            background: #fff8f8;
        }

        .config-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .config-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .config-item label {
            font-weight: 600;
            color: #495057;
        }

        .config-item input, .config-item select {
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }

        .log-success { background: rgba(40, 167, 69, 0.1); color: #28a745; }
        .log-error { background: rgba(220, 53, 69, 0.1); color: #dc3545; }
        .log-warning { background: rgba(255, 193, 7, 0.1); color: #856404; }
        .log-info { background: rgba(23, 162, 184, 0.1); color: #0c5460; }

        .export-section {
            border-top: 2px solid #e9ecef;
            padding-top: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Article Editor Test Runner</h1>
        
        <div class="status-bar">
            <div class="status-indicator">
                <div class="indicator-dot" id="statusDot"></div>
                <span id="statusText">Ready to run tests</span>
            </div>
            <div id="testStats">
                <span id="passedCount">0</span> passed, 
                <span id="failedCount">0</span> failed, 
                <span id="totalCount">0</span> total
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="config-section">
            <h3>üîß Test Configuration</h3>
            <div class="config-grid">
                <div class="config-item">
                    <label for="testArticleId">Test Article ID:</label>
                    <input type="text" id="testArticleId" value="test-article-001" placeholder="Article ID for testing">
                </div>
                <div class="config-item">
                    <label for="testTimeout">Test Timeout (ms):</label>
                    <input type="number" id="testTimeout" value="30000" min="5000" max="120000">
                </div>
                <div class="config-item">
                    <label for="testEnvironment">Environment:</label>
                    <select id="testEnvironment">
                        <option value="development">Development</option>
                        <option value="staging">Staging</option>
                        <option value="production">Production</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="performanceMode">Performance Mode:</label>
                    <select id="performanceMode">
                        <option value="standard">Standard</option>
                        <option value="detailed">Detailed</option>
                        <option value="minimal">Minimal</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="test-controls">
            <div class="control-group">
                <h3>üöÄ Quick Tests</h3>
                <button onclick="runFullTestSuite()" class="success">Run Full Suite</button>
                <button onclick="runPerformanceTests()" class="info">Performance Only</button>
                <button onclick="runFunctionalityTests()" class="warning">Functionality Only</button>
                <button onclick="runErrorTests()" class="danger">Error Handling</button>
            </div>

            <div class="control-group">
                <h3>üéØ Specific Tests</h3>
                <button onclick="testBundleSize()">Bundle Analysis</button>
                <button onclick="testMemoryUsage()">Memory Usage</button>
                <button onclick="testAutoSave()">Auto-Save</button>
                <button onclick="testRealTimeSync()">Real-Time Sync</button>
            </div>

            <div class="control-group">
                <h3>üåê Browser Tests</h3>
                <button onclick="testCurrentBrowser()">Current Browser</button>
                <button onclick="testMobileView()">Mobile Simulation</button>
                <button onclick="testAccessibility()">Accessibility</button>
                <button onclick="clearResults()">Clear Results</button>
            </div>

            <div class="control-group">
                <h3>‚öôÔ∏è Test Tools</h3>
                <button onclick="generateTestData()">Generate Test Data</button>
                <button onclick="injectErrors()">Inject Test Errors</button>
                <button onclick="simulateNetworkIssues()">Network Issues</button>
                <button onclick="openEditorTest()" class="info">Open Test Article</button>
            </div>
        </div>

        <div class="test-output">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h3>üìä Test Output</h3>
                <div>
                    <button onclick="clearOutput()" style="min-width: auto; padding: 8px 16px;">Clear</button>
                    <button onclick="exportResults()" style="min-width: auto; padding: 8px 16px;">Export</button>
                </div>
            </div>
            <div class="output-area" id="outputArea">
                <div class="log-entry log-info">Test runner initialized. Ready to run tests.</div>
                <div class="log-entry log-info">Click any test button above to begin testing.</div>
            </div>
        </div>

        <div class="test-results" id="testResults">
            <!-- Test result cards will be inserted here -->
        </div>

        <div class="export-section">
            <h3>üìÑ Export & Reports</h3>
            <button onclick="downloadHTMLReport()" class="success">Download HTML Report</button>
            <button onclick="downloadJSONReport()" class="info">Download JSON Report</button>
            <button onclick="copyResultsToClipboard()" class="warning">Copy to Clipboard</button>
            <button onclick="emailResults()" class="info">Email Results</button>
        </div>
    </div>

    <script src="automated-testing-utilities.js"></script>
    <script>
        let testSuite = null;
        let currentTests = [];
        let testResults = [];

        // Initialize test suite
        function initializeTestSuite() {
            if (!window.ArticleEditorTestSuite) {
                logOutput('Error: ArticleEditorTestSuite not loaded', 'error');
                return null;
            }

            testSuite = new ArticleEditorTestSuite();
            
            // Override addTestResult to capture results
            const originalAddTestResult = testSuite.addTestResult.bind(testSuite);
            testSuite.addTestResult = function(testName, passed, details) {
                originalAddTestResult(testName, passed, details);
                
                const result = { testName, passed, details, timestamp: Date.now() };
                testResults.push(result);
                updateTestStats();
                addResultCard(result);
            };

            return testSuite;
        }

        // Test execution functions
        async function runFullTestSuite() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Running full test suite...');
            logOutput('üöÄ Starting full test suite...', 'info');
            
            try {
                await testSuite.runFullTestSuite();
                updateStatus('success', 'Full test suite completed');
                logOutput('‚úÖ Full test suite completed successfully', 'success');
            } catch (error) {
                updateStatus('error', 'Test suite failed');
                logOutput(`‚ùå Test suite failed: ${error.message}`, 'error');
            }
        }

        async function runPerformanceTests() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Running performance tests...');
            logOutput('‚ö° Running performance tests...', 'info');
            
            try {
                await testSuite.runPerformanceTests();
                updateStatus('success', 'Performance tests completed');
                logOutput('‚úÖ Performance tests completed', 'success');
            } catch (error) {
                updateStatus('error', 'Performance tests failed');
                logOutput(`‚ùå Performance tests failed: ${error.message}`, 'error');
            }
        }

        async function runFunctionalityTests() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Running functionality tests...');
            logOutput('üîß Running functionality tests...', 'info');
            
            try {
                await testSuite.runFunctionalityTests();
                updateStatus('success', 'Functionality tests completed');
                logOutput('‚úÖ Functionality tests completed', 'success');
            } catch (error) {
                updateStatus('error', 'Functionality tests failed');
                logOutput(`‚ùå Functionality tests failed: ${error.message}`, 'error');
            }
        }

        async function runErrorTests() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Running error handling tests...');
            logOutput('üö® Running error handling tests...', 'info');
            
            try {
                await testSuite.runErrorHandlingTests();
                updateStatus('success', 'Error handling tests completed');
                logOutput('‚úÖ Error handling tests completed', 'success');
            } catch (error) {
                updateStatus('error', 'Error handling tests failed');
                logOutput(`‚ùå Error handling tests failed: ${error.message}`, 'error');
            }
        }

        // Specific test functions
        async function testBundleSize() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Analyzing bundle size...');
            logOutput('üì¶ Analyzing bundle size...', 'info');
            
            try {
                await testSuite.testBundleSize();
                updateStatus('success', 'Bundle analysis completed');
            } catch (error) {
                updateStatus('error', 'Bundle analysis failed');
                logOutput(`‚ùå Bundle analysis failed: ${error.message}`, 'error');
            }
        }

        async function testMemoryUsage() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Testing memory usage...');
            logOutput('üß† Testing memory usage...', 'info');
            
            try {
                await testSuite.testMemoryUsage();
                updateStatus('success', 'Memory tests completed');
            } catch (error) {
                updateStatus('error', 'Memory tests failed');
                logOutput(`‚ùå Memory tests failed: ${error.message}`, 'error');
            }
        }

        async function testAutoSave() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Testing auto-save performance...');
            logOutput('üíæ Testing auto-save performance...', 'info');
            
            try {
                await testSuite.testAutoSavePerformance();
                updateStatus('success', 'Auto-save tests completed');
            } catch (error) {
                updateStatus('error', 'Auto-save tests failed');
                logOutput(`‚ùå Auto-save tests failed: ${error.message}`, 'error');
            }
        }

        async function testRealTimeSync() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Testing real-time synchronization...');
            logOutput('ü§ù Testing real-time synchronization...', 'info');
            
            try {
                await testSuite.testCollaborationPerformance();
                updateStatus('success', 'Real-time sync tests completed');
            } catch (error) {
                updateStatus('error', 'Real-time sync tests failed');
                logOutput(`‚ùå Real-time sync tests failed: ${error.message}`, 'error');
            }
        }

        // Browser and simulation tests
        async function testCurrentBrowser() {
            if (!initializeTestSuite()) return;
            
            updateStatus('running', 'Testing current browser compatibility...');
            logOutput('üåê Testing current browser compatibility...', 'info');
            
            try {
                await testSuite.runCrossBrowserTests();
                updateStatus('success', 'Browser compatibility tests completed');
            } catch (error) {
                updateStatus('error', 'Browser tests failed');
                logOutput(`‚ùå Browser tests failed: ${error.message}`, 'error');
            }
        }

        function testMobileView() {
            // Simulate mobile viewport
            const viewport = document.querySelector('meta[name="viewport"]');
            if (!viewport) {
                const meta = document.createElement('meta');
                meta.name = 'viewport';
                meta.content = 'width=375, initial-scale=1';
                document.head.appendChild(meta);
            }
            
            // Resize window to mobile size
            if (window.resizeTo) {
                window.resizeTo(375, 667);
            }
            
            logOutput('üì± Mobile view simulation activated', 'info');
            logOutput('Note: Some mobile features require actual mobile device testing', 'warning');
        }

        function testAccessibility() {
            logOutput('‚ôø Running accessibility tests...', 'info');
            
            // Basic accessibility checks
            const checks = [
                {
                    name: 'Images have alt text',
                    test: () => {
                        const images = document.querySelectorAll('img');
                        return Array.from(images).every(img => img.alt || img.getAttribute('aria-label'));
                    }
                },
                {
                    name: 'Buttons have accessible names',
                    test: () => {
                        const buttons = document.querySelectorAll('button');
                        return Array.from(buttons).every(btn => 
                            btn.textContent.trim() || btn.getAttribute('aria-label') || btn.getAttribute('title')
                        );
                    }
                },
                {
                    name: 'Headings are properly structured',
                    test: () => {
                        const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
                        return headings.length > 0;
                    }
                }
            ];
            
            checks.forEach(check => {
                const passed = check.test();
                logOutput(`${passed ? '‚úÖ' : '‚ùå'} ${check.name}`, passed ? 'success' : 'error');
            });
        }

        // Utility functions
        function generateTestData() {
            logOutput('üé≤ Generating test data...', 'info');
            
            // Generate random test content
            const testContent = [
                'This is test content for article editor validation.',
                'Testing auto-save functionality with this content.',
                'Real-time collaboration test message.',
                'Performance testing with longer content that includes multiple sentences and paragraphs.'
            ];
            
            window.testData = {
                articleId: `test-${Date.now()}`,
                content: testContent[Math.floor(Math.random() * testContent.length)],
                timestamp: new Date().toISOString()
            };
            
            logOutput(`Generated test data: Article ID ${window.testData.articleId}`, 'success');
        }

        function injectErrors() {
            logOutput('üíâ Injecting test errors...', 'warning');
            
            // Temporarily override console.error to catch errors
            const originalError = console.error;
            let errorCount = 0;
            
            console.error = function(...args) {
                errorCount++;
                originalError.apply(console, args);
                logOutput(`Caught error ${errorCount}: ${args[0]}`, 'error');
            };
            
            // Inject some test errors
            setTimeout(() => {
                try {
                    throw new Error('Test error injection');
                } catch (e) {
                    console.error('Injected test error:', e.message);
                }
            }, 1000);
            
            // Restore original console.error after 30 seconds
            setTimeout(() => {
                console.error = originalError;
                logOutput('Error injection completed', 'info');
            }, 30000);
        }

        function simulateNetworkIssues() {
            logOutput('üåê Simulating network issues...', 'warning');
            
            // Override fetch to simulate network problems
            const originalFetch = window.fetch;
            let requestCount = 0;
            
            window.fetch = function(...args) {
                requestCount++;
                
                // Simulate random network issues
                if (Math.random() < 0.3) { // 30% chance of network issue
                    logOutput(`Network issue simulated for request ${requestCount}`, 'warning');
                    return Promise.reject(new Error('Simulated network failure'));
                }
                
                // Add random delay
                const delay = Math.random() * 2000 + 500; // 500-2500ms delay
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve(originalFetch.apply(window, args));
                    }, delay);
                });
            };
            
            // Restore original fetch after 60 seconds
            setTimeout(() => {
                window.fetch = originalFetch;
                logOutput('Network simulation ended', 'info');
            }, 60000);
        }

        function openEditorTest() {
            const testArticleId = document.getElementById('testArticleId').value || 'test-article-001';
            const editorUrl = `/articles/${testArticleId}?autotest=true`;
            
            logOutput(`Opening test article: ${editorUrl}`, 'info');
            window.open(editorUrl, '_blank');
        }

        // UI update functions
        function updateStatus(status, message) {
            const statusDot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');
            
            statusDot.className = `indicator-dot ${status}`;
            statusText.textContent = message;
        }

        function logOutput(message, type = 'info') {
            const outputArea = document.getElementById('outputArea');
            const timestamp = new Date().toLocaleTimeString();
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            
            outputArea.appendChild(logEntry);
            outputArea.scrollTop = outputArea.scrollHeight;
        }

        function updateTestStats() {
            const passed = testResults.filter(r => r.passed).length;
            const failed = testResults.filter(r => !r.passed).length;
            const total = testResults.length;
            
            document.getElementById('passedCount').textContent = passed;
            document.getElementById('failedCount').textContent = failed;
            document.getElementById('totalCount').textContent = total;
            
            // Update progress bar
            if (total > 0) {
                const progress = (passed + failed) / total * 100;
                document.getElementById('progressFill').style.width = `${progress}%`;
            }
        }

        function addResultCard(result) {
            const resultsContainer = document.getElementById('testResults');
            
            const card = document.createElement('div');
            card.className = `result-card ${result.passed ? 'passed' : 'failed'}`;
            
            card.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 8px;">
                    ${result.passed ? '‚úÖ' : '‚ùå'} ${result.testName}
                </div>
                <div style="color: #6c757d; font-size: 14px;">
                    ${result.details}
                </div>
                <div style="color: #9ca3af; font-size: 12px; margin-top: 8px;">
                    ${new Date(result.timestamp).toLocaleTimeString()}
                </div>
            `;
            
            resultsContainer.appendChild(card);
        }

        function clearResults() {
            testResults = [];
            document.getElementById('testResults').innerHTML = '';
            updateTestStats();
            updateStatus('ready', 'Ready to run tests');
            logOutput('Test results cleared', 'info');
        }

        function clearOutput() {
            document.getElementById('outputArea').innerHTML = '';
        }

        // Export functions
        function exportResults() {
            const report = {
                timestamp: new Date().toISOString(),
                testResults: testResults,
                environment: {
                    userAgent: navigator.userAgent,
                    viewport: `${window.innerWidth}x${window.innerHeight}`,
                    url: window.location.href
                },
                summary: {
                    total: testResults.length,
                    passed: testResults.filter(r => r.passed).length,
                    failed: testResults.filter(r => !r.passed).length
                }
            };
            
            return report;
        }

        function downloadHTMLReport() {
            const report = exportResults();
            
            const html = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Article Editor Test Report</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .summary { background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
                        .passed { color: #28a745; }
                        .failed { color: #dc3545; }
                        .test-result { padding: 10px; border-bottom: 1px solid #eee; }
                    </style>
                </head>
                <body>
                    <h1>Article Editor Test Report</h1>
                    <div class="summary">
                        <h2>Summary</h2>
                        <p><strong>Total Tests:</strong> ${report.summary.total}</p>
                        <p><strong>Passed:</strong> <span class="passed">${report.summary.passed}</span></p>
                        <p><strong>Failed:</strong> <span class="failed">${report.summary.failed}</span></p>
                        <p><strong>Timestamp:</strong> ${report.timestamp}</p>
                    </div>
                    <div class="results">
                        <h2>Test Results</h2>
                        ${report.testResults.map(test => `
                            <div class="test-result">
                                <span class="${test.passed ? 'passed' : 'failed'}">${test.passed ? '‚úÖ' : '‚ùå'}</span>
                                <strong>${test.testName}</strong>: ${test.details}
                            </div>
                        `).join('')}
                    </div>
                </body>
                </html>
            `;
            
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `article-editor-test-report-${Date.now()}.html`;
            a.click();
            URL.revokeObjectURL(url);
            
            logOutput('HTML report downloaded', 'success');
        }

        function downloadJSONReport() {
            const report = exportResults();
            const json = JSON.stringify(report, null, 2);
            
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `article-editor-test-results-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            logOutput('JSON report downloaded', 'success');
        }

        function copyResultsToClipboard() {
            const report = exportResults();
            const text = `Article Editor Test Results
Generated: ${report.timestamp}
Total: ${report.summary.total} | Passed: ${report.summary.passed} | Failed: ${report.summary.failed}

${report.testResults.map(test => 
    `${test.passed ? '‚úÖ' : '‚ùå'} ${test.testName}: ${test.details}`
).join('\n')}`;
            
            navigator.clipboard.writeText(text).then(() => {
                logOutput('Results copied to clipboard', 'success');
            }).catch(() => {
                logOutput('Failed to copy to clipboard', 'error');
            });
        }

        function emailResults() {
            const report = exportResults();
            const subject = `Article Editor Test Results - ${new Date().toLocaleDateString()}`;
            const body = `Test Results Summary:
Total: ${report.summary.total}
Passed: ${report.summary.passed}
Failed: ${report.summary.failed}

Environment: ${report.environment.userAgent}
Timestamp: ${report.timestamp}

Please see attached detailed report.`;
            
            const mailtoUrl = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoUrl;
            
            logOutput('Email client opened with results', 'info');
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            logOutput('Test Runner initialized', 'success');
            logOutput('Ready to run Article Editor tests', 'info');
            
            // Check if ArticleEditorTestSuite is available
            if (window.ArticleEditorTestSuite) {
                logOutput('ArticleEditorTestSuite loaded successfully', 'success');
            } else {
                logOutput('Warning: ArticleEditorTestSuite not found. Make sure automated-testing-utilities.js is loaded.', 'warning');
            }
        });
    </script>
</body>
</html>